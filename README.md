# Discord 反应用户快速查找 (Discord Reaction User Finder)

这是一个用于 Discord 网页版的 Tampermonkey (油猴) 脚本。它极大地增强了 Discord 消息“反应 (Reactions)”弹窗的功能，让你能**快速查找点赞用户**、**一键加载完整名单**以及**导出所有用户列表**。

## ✨ 主要功能

*   **🔍 快速查找**：输入用户名、昵称或 ID，快速判断某人是否点击了反应。
*   **🎯 自动定位**：找到目标用户后，脚本会自动滚动列表并**高亮显示**该用户行。
*   **📜 全量加载**：解决 Discord 懒加载机制导致无法看到所有人的问题，脚本会自动滚动到底部加载完整名单。
*   **📋 名单导出**：一键将所有点击反应的用户名单（昵称 + 用户名）复制到剪贴板，方便统计。
*   **⚡ 智能缓存**：在一个反应标签页内，扫描过的名单会自动缓存，再次查找时无需等待。

## 🚀 安装方法

1.  **安装管理器**：确保你的浏览器已安装 [Tampermonkey](https://www.tampermonkey.net/) 扩展（Chrome / Edge / Firefox）。
2.  **安装脚本**：
    *   点击 [这里安装脚本](https://github.com/Naya1-1/Discord-Reaction-User-Finder/raw/main/discord-reaction-checker.user.js)
    *   或者在 Tampermonkey 中创建一个新脚本，将 `discord-reaction-checker.user.js` 的代码完整复制进去并保存。
3.  **刷新页面**：安装完成后，刷新 Discord 网页版即可生效。

## 📖 使用指南

### 1. 激活脚本
在 Discord 任意消息上，点击反应图标下方的数字，或者右键消息选择“查看反应”，打开**反应详情弹窗**。脚本会自动检测并注入控制面板。

> **注意**：脚本仅在“反应”弹窗出现时才会显示界面。

### 2. 查找用户
*   在输入框中输入 **用户名**、**昵称** 或 **用户ID**。
*   按 `Enter` 键或点击 **“查找”** 按钮。
*   脚本会自动向下滚动扫描。如果找到用户，列表会自动跳转到该位置，并用**绿色边框**高亮该用户。

### 3. 获取完整名单 & 导出
*   点击 **“全量加载”** 按钮。
*   脚本会自动模拟滚动，直到加载完该表情下的所有用户。
*   加载完成后，下方会出现一个文本框显示完整名单。
*   点击 **“复制名单”** 按钮即可将列表复制到剪贴板。

### 4. 切换表情
如果你切换了弹窗左侧的 Emoji 标签（例如从 👍 切到 ❤️），脚本会自动重置缓存。你需要重新点击查找或全量加载。

## ❓ 常见问题

**Q: 为什么找不到人？**

A:
1. 请确认对方是否真的点击了该反应。
2. 尝试切换到具体的 Emoji 标签页（而不是“全部”标签）再进行查找。
3. 输入关键词尽量准确（脚本支持模糊匹配，但精确 ID 最准）。

**Q: 脚本安全吗？**

A: 本脚本完全开源，所有操作均在本地浏览器进行，仅模拟用户滚动和读取页面文本，不会上传任何数据，也不会执行任何危险操作。

**Q: 为什么全量加载有时候会停住？**

A: 脚本内置了防卡死机制。如果网络较慢导致 Discord 加载不出新用户，脚本在尝试多次后会自动停止。你可以再次点击按钮继续加载。

## 🛠️ 技术细节

*   **匹配机制**：支持标准用户名 (`username`)、显示名称 (`Global Name`) 和用户 ID (`Snowflake`)。
*   **兼容性**：适配 Discord 最新的 React 界面结构，采用特征检测而非固定类名，抗更新能力强。
*   **性能优化**：使用 `requestAnimationFrame` 和智能休眠策略，尽量减少对浏览器性能的影响。

---

**License**
MIT